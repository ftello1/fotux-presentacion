<div class="calculator">
  <h2>ðŸ§® Calculadora Comparativa Fotux vs Competencia</h2>
  <form id="calcForm">
    <label>LÃºmenes requeridos totales:</label><input type="number" id="lumenesRequeridos">

    <label>Selecciona luminaria Fotux:</label>
    <select id="fotuxSelect" onchange="actualizarImagen()">
      <option value="fotux-ufo" data-lumen="210" data-potencia="100" data-imagen="img/campana-ufo-210lmw.png">Campana UFO 210 lm/W</option>
      <option value="fotux-240w" data-lumen="190" data-potencia="240" data-imagen="img/campana-industrial-fotux-240w.png">Campana Industrial 240W</option>
    </select>

    <label>Selecciona luminaria competencia:</label>
    <select id="competenciaSelect">
      <option value="comp-150lmw" data-lumen="150" data-potencia="150">GenÃ©rica 150 lm/W</option>
      <option value="comp-120lmw" data-lumen="120" data-potencia="200">GenÃ©rica 120 lm/W</option>
    </select>

    <label>Horas por dÃ­a:</label><input type="number" id="horas" value="10">
    <label>DÃ­as por aÃ±o:</label><input type="number" id="dias" value="300">
    <label>Costo kWh (CLP):</label><input type="number" id="costoKwh" value="130">
    <label>Costo unitario Fotux (CLP):</label><input type="number" id="costoFotux" value="95000">
    <label>Costo unitario competencia (CLP):</label><input type="number" id="costoComp" value="75000">
    <label>Mantenimiento anual Fotux (CLP):</label><input type="number" id="mantFotux" value="0">
    <label>Mantenimiento anual competencia (CLP):</label><input type="number" id="mantComp" value="15000">

    <button type="button" onclick="calcular()">Comparar</button>
  </form>

  <div class="result" id="resultado"></div>
  <div id="imagenLuminaria" style="text-align:center; margin-top:20px;">
    <img src="img/campana-ufo-210lmw.png" alt="Luminaria Fotux" style="max-width:300px; border-radius:8px;">
  </div>
</div>

<script>
function actualizarImagen() {
  const select = document.getElementById('fotuxSelect');
  const imagen = select.options[select.selectedIndex].getAttribute('data-imagen');
  document.querySelector('#imagenLuminaria img').src = imagen;
}

function calcular() {
  const lumenesRequeridos = +document.getElementById('lumenesRequeridos').value;
  const horas = +document.getElementById('horas').value;
  const dias = +document.getElementById('dias').value;
  const costoKwh = +document.getElementById('costoKwh').value;

  const fotux = document.getElementById('fotuxSelect').selectedOptions[0];
  const comp = document.getElementById('competenciaSelect').selectedOptions[0];

  const lumenFotux = +fotux.getAttribute('data-lumen');
  const potFotux = +fotux.getAttribute('data-potencia');
  const costoFotux = +document.getElementById('costoFotux').value;
  const mantFotux = +document.getElementById('mantFotux').value;

  const lumenComp = +comp.getAttribute('data-lumen');
  const potComp = +comp.getAttribute('data-potencia');
  const costoComp = +document.getElementById('costoComp').value;
  const mantComp = +document.getElementById('mantComp').value;

  const cantidadFotux = Math.ceil(lumenesRequeridos / (lumenFotux * potFotux));
  const cantidadComp = Math.ceil(lumenesRequeridos / (lumenComp * potComp));

  const consumoFotux = (potFotux * horas * dias * cantidadFotux) / 1000;
  const consumoComp = (potComp * horas * dias * cantidadComp) / 1000;

  const costoEnergiaFotux = consumoFotux * costoKwh;
  const costoEnergiaComp = consumoComp * costoKwh;

  const totalFotux = (costoFotux * cantidadFotux) + costoEnergiaFotux + mantFotux;
  const totalComp = (costoComp * cantidadComp) + costoEnergiaComp + mantComp;

  const ahorro = totalComp - totalFotux;
  const roi = totalFotux / (ahorro || 1);

  document.getElementById('resultado').innerHTML = `
    <h3>ðŸ”Ž Resultados</h3>
    <p><strong>Cantidad luminarias Fotux:</strong> ${cantidadFotux}</p>
    <p><strong>Cantidad luminarias competencia:</strong> ${cantidadComp}</p>
    <p><strong>Consumo anual Fotux:</strong> ${consumoFotux.toFixed(2)} kWh</p>
    <p><strong>Consumo anual competencia:</strong> ${consumoComp.toFixed(2)} kWh</p>
    <p><strong>Costo total Fotux:</strong> $${totalFotux.toLocaleString()}</p>
    <p><strong>Costo total competencia:</strong> $${totalComp.toLocaleString()}</p>
    <p><strong>Ahorro estimado:</strong> $${ahorro.toLocaleString()}</p>
    <p><strong>ROI estimado:</strong> ${roi.toFixed(2)} aÃ±os</p>
  `;
}
</script>
